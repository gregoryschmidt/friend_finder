<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <title>Friend Finder</title>
  </head>
  <body>
    <div class="container">
        <div class="jumbotron">
        <h1 class="display-4"><i class="fa fa-user-plus"></i><strong> Friend Finder</strong></h1>
        <hr class="my-4">
        <h3>Survey Questions</h3>
        </div>
        <form>
            <div class="form-group">
              <label for="formName"><strong>Name (required)</strong></label>
              <input type="text" class="form-control" id="name" required>
            </div>
            
            <div class="form-group">
              <label for="formPhoto"><strong>Link to photo image (required)</strong></label>
              <input type="text" class="form-control" id="photo" required>
            </div>
            
            <div class="form-group">
                <label><strong>1. Summer is the best season of the year.</strong></label>
                <select class="form-control form-control-sm" id="q1" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>2. Internet is better than TV.</strong></label>
                <select class="form-control form-control-sm" id="q2" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>3. It's ok to lie.</strong></label>
                <select class="form-control form-control-sm" id="q3" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>4. The night is better than the day.</strong></label>
                <select class="form-control form-control-sm" id="q4" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>5. Playing a game is fun only when you win.</strong></label>
                <select class="form-control form-control-sm" id="q5" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>6. Skipping is fun.</strong></label>
                <select class="form-control form-control-sm" id="q6" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>7. Cats make better pets than dogs.</strong></label>
                <select class="form-control form-control-sm" id="q7" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>8. Cinnamon smells good.</strong></label>
                <select class="form-control form-control-sm" id="q8" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>9. British accents are sexy.</strong></label>
                <select class="form-control form-control-sm" id="q9" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <div class="form-group">
                <label><strong>10. Mountains are better than the beach.</strong></label>
                <select class="form-control form-control-sm" id="q10" style="width: 155px;">
                  <option>Select an option</option>
                  <option value = "1">1 (strongly disagree)</option>
                  <option value = "2">2</option>
                  <option value = "3">3</option>
                  <option value = "4">4</option>
                  <option value = "5">5 (strongly agree)</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary btn-block" id="submit-button"><i class="fa fa-check-circle"></i> Submit</button>

        </form>
        <br>
        <footer class="footer">
            <p><a href="/api/friends">API Friends List</a> | <a href="#">GitHub Repo</a></p>
        </footer>  
    </div>

    <!-- Modal -->
    <div class="modal" id="mymodal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Your Best Match</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p id="match-name"></p>
            <img id="match-image" src="">
          </div>
          <div class="modal-footer">

            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  

<!-- Grabs form data and sends it to server -->
<script>
  $("#submit-button").on("click", function(event) {
      event.preventDefault();
            //creates a new friend from the values submitted
            var newFriend = {
                name: $('#name').val().trim(),
                photo: $('#photo').val().trim(),
                scores: [
                    $('#q1').val(),
                    $('#q2').val(),
                    $('#q3').val(),
                    $('#q4').val(),
                    $('#q5').val(),
                    $('#q6').val(),
                    $('#q7').val(),
                    $('#q8').val(),
                    $('#q9').val(),
                    $('#q10').val(),
                ]
            };
            console.log (newFriend);
            //AJAX posts the data to friends API.
            $.post('/api/friends', newFriend, function(data) {
                //Grab the result from the AJAX post so that the best match's name and photo are displayed.
                $("#match-name").text(data.matchName);
                $("#match-image").attr("src", data.matchPhoto);
                $('#mymodal').modal();

            $('#name').val("");
            $('#photo').val("");
            $('#q1').val("");
            $('#q2').val("");
            $('#q3').val("");
            $('#q4').val("");
            $('#q5').val("");
            $('#q6').val("");
            $('#q7').val("");
            $('#q8').val("");
            $('#q9').val("");
            $('#q10').val("");
            });
          });
            // Show the modal with the best match
                
            //clear form after submission
            
</script>
  </body>
</html>